"use strict";exports.id=952,exports.ids=[952],exports.modules={66638:(a,b,c)=>{c.d(b,{A:()=>t});var d=c(21124),e=c(38301),f=c(85607),g=c(78711),h=c(72954),i=c(50593),j=c(90133),k=c(51881),l=c(75535),m=c(84122),n=c(90477),o=c(28074),p=c(40284),q=c(81100);let r=()=>({shapes:[],texts:[],version:"1.0"}),s=()=>`ann_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;function t({slideId:a,initialAnnotations:b,isEditMode:c=!1,isPresentationMode:t=!1,onAnnotationsChange:u,onSave:v,className:w=""}){let[x,y]=(0,e.useState)(()=>(a=>{if(!a)return r();try{let b=JSON.parse(a);return{shapes:b.shapes||[],texts:b.texts||[],version:b.version||"1.0"}}catch(a){return console.warn("Failed to parse annotation data:",a),r()}})(b)),[z,A]=(0,e.useState)({activeTool:"select",strokeColor:"#ef4444",fillColor:"transparent",strokeWidth:2,fontSize:16,opacity:1}),[B,C]=(0,e.useState)(!1),[D,E]=(0,e.useState)(null),[F,G]=(0,e.useState)([]),[H,I]=(0,e.useState)(null),[J,K]=(0,e.useState)(!1),[L,M]=(0,e.useState)(!1),N=(0,e.useRef)(null),O=(0,e.useRef)(null),P=(0,e.useCallback)(a=>{if(!O.current)return{x:0,y:0};let b=O.current.getBoundingClientRect();return{x:Math.max(0,Math.min(100,(a.clientX-b.left)/b.width*100)),y:Math.max(0,Math.min(100,(a.clientY-b.top)/b.height*100))}},[]),Q=(0,e.useCallback)(a=>{if(!c||"select"===z.activeTool)return;a.preventDefault();let b=P(a);if("text"===z.activeTool){let a={id:s(),text:"Click to edit",x:b.x,y:b.y,style:{fontSize:z.fontSize,color:z.strokeColor,fontFamily:"Inter, sans-serif",fontWeight:"normal"},createdAt:Date.now(),updatedAt:Date.now()};y(b=>({...b,texts:[...b.texts,a]})),I(a.id)}else if("path"===z.activeTool)G([b]),C(!0);else{let a={id:s(),type:z.activeTool,x:b.x,y:b.y,width:0,height:0,style:{stroke:z.strokeColor,strokeWidth:z.strokeWidth,fill:z.fillColor,opacity:z.opacity},createdAt:Date.now(),updatedAt:Date.now()};("line"===z.activeTool||"arrow"===z.activeTool)&&(a.x2=b.x,a.y2=b.y),E(a),C(!0)}},[c,z,P]),R=(0,e.useCallback)(a=>{if(!B)return;let b=P(a);if("path"===z.activeTool)return void G(a=>[...a,b]);if(D)if("line"===D.type||"arrow"===D.type)E({...D,x2:b.x,y2:b.y});else{let a=Math.abs(b.x-D.x),c=Math.abs(b.y-D.y),d=Math.min(D.x,b.x),e=Math.min(D.y,b.y);E({...D,x:d,y:e,width:a,height:c})}},[B,D,P]),S=(0,e.useCallback)(()=>{if(B){if("path"===z.activeTool&&F.length>1){let a=F.reduce((a,b,c)=>0===c?`M ${b.x} ${b.y}`:`${a} L ${b.x} ${b.y}`,""),b=Math.min(...F.map(a=>a.x)),c=Math.max(...F.map(a=>a.x)),d=Math.min(...F.map(a=>a.y)),e=Math.max(...F.map(a=>a.y)),f={id:s(),type:"path",x:b,y:d,width:c-b,height:e-d,path:a,style:{stroke:z.strokeColor,strokeWidth:z.strokeWidth,fill:"none",opacity:z.opacity},createdAt:Date.now(),updatedAt:Date.now()};y(a=>({...a,shapes:[...a.shapes,f]})),G([]),C(!1);return}D&&(("line"===D.type||"arrow"===D.type?Math.abs((D.x2||0)-D.x)>1||Math.abs((D.y2||0)-D.y)>1:D.width>1||D.height>1)&&y(a=>({...a,shapes:[...a.shapes,D]})),E(null),C(!1))}},[B,D,F,z]),T=(0,e.useCallback)(a=>{y(b=>({...b,shapes:b.shapes.filter(b=>b.id!==a),texts:b.texts.filter(b=>b.id!==a)})),I(null)},[]),U=(0,e.useCallback)(()=>{y(r()),I(null)},[]),V=(0,e.useCallback)((a,b,e=!1)=>{let f={stroke:a.style.stroke,strokeWidth:a.style.strokeWidth,fill:a.style.fill,opacity:a.style.opacity,strokeDasharray:a.style.strokeDasharray,className:b?"cursor-move":"cursor-pointer",onClick:c?()=>I(a.id):void 0};switch(a.type){case"rectangle":return(0,d.jsx)("rect",{x:`${a.x}%`,y:`${a.y}%`,width:`${a.width}%`,height:`${a.height}%`,...f},a.id);case"circle":let g=a.x+a.width/2,h=a.y+a.height/2,i=a.width/2,j=a.height/2;return(0,d.jsx)("ellipse",{cx:`${g}%`,cy:`${h}%`,rx:`${i}%`,ry:`${j}%`,...f},a.id);case"line":return(0,d.jsx)("line",{x1:`${a.x}%`,y1:`${a.y}%`,x2:`${a.x2||a.x}%`,y2:`${a.y2||a.y}%`,...f},a.id);case"arrow":let k=a.x,l=a.y,m=a.x2||a.x,n=a.y2||a.y,o=Math.atan2(n-l,m-k),p=Math.PI/6,q=m-2*Math.cos(o-p),r=n-2*Math.sin(o-p),s=m-2*Math.cos(o+p),t=n-2*Math.sin(o+p);return(0,d.jsxs)("g",{children:[(0,d.jsx)("line",{x1:`${k}%`,y1:`${l}%`,x2:`${m}%`,y2:`${n}%`,...f}),(0,d.jsx)("line",{x1:`${m}%`,y1:`${n}%`,x2:`${q}%`,y2:`${r}%`,...f}),(0,d.jsx)("line",{x1:`${m}%`,y1:`${n}%`,x2:`${s}%`,y2:`${t}%`,...f})]},a.id);case"path":return(0,d.jsx)("path",{d:a.path,stroke:a.style.stroke,strokeWidth:.1*a.style.strokeWidth,fill:"none",opacity:a.style.opacity,strokeLinecap:"round",strokeLinejoin:"round",vectorEffect:"non-scaling-stroke",className:b?"cursor-move":"cursor-pointer",onClick:c?()=>I(a.id):void 0},a.id);default:return null}},[c]),W=(0,e.useCallback)((a,b)=>(0,d.jsx)("text",{x:`${a.x}%`,y:`${a.y}%`,fontSize:a.style.fontSize,fill:a.style.color,fontFamily:a.style.fontFamily,fontWeight:a.style.fontWeight,textAnchor:"start",dominantBaseline:"hanging",className:b?"cursor-move":c?"cursor-pointer":"",onClick:c?()=>I(a.id):void 0,children:a.text},a.id),[c]);return(0,d.jsxs)("div",{ref:O,className:`absolute inset-0 pointer-events-none ${w}`,style:{zIndex:t?20:10},children:[(0,d.jsxs)("svg",{ref:N,className:`w-full h-full ${c?"pointer-events-auto":"pointer-events-none"}`,viewBox:"0 0 100 100",preserveAspectRatio:"none",onMouseDown:Q,onMouseMove:R,onMouseUp:S,style:{cursor:c?"select"===z.activeTool?"default":"crosshair":"default"},children:[x.shapes.map(a=>V(a,H===a.id)),x.texts.map(a=>W(a,H===a.id)),D&&V(D,!1,!0),F.length>0&&(0,d.jsx)("path",{d:F.reduce((a,b,c)=>0===c?`M ${b.x} ${b.y}`:`${a} L ${b.x} ${b.y}`,""),stroke:z.strokeColor,strokeWidth:.1*z.strokeWidth,fill:"none",opacity:z.opacity,strokeLinecap:"round",strokeLinejoin:"round",vectorEffect:"non-scaling-stroke"})]}),(0,d.jsx)(f.N,{children:J&&(0,d.jsxs)(g.P.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",damping:20,stiffness:300},className:"absolute top-4 left-1/2 -translate-x-1/2 pointer-events-auto",children:[(0,d.jsxs)("div",{className:"bg-background border border-border rounded-lg shadow-lg p-2 flex items-center gap-2",children:[(0,d.jsx)("div",{className:"flex items-center gap-1 pr-2 border-r border-border",children:[{tool:"select",icon:h.A,title:"Select"},{tool:"rectangle",icon:i.A,title:"Rectangle"},{tool:"circle",icon:j.A,title:"Circle"},{tool:"line",icon:k.A,title:"Line"},{tool:"arrow",icon:l.A,title:"Arrow"},{tool:"path",icon:m.A,title:"Free Draw"},{tool:"text",icon:n.A,title:"Text"}].map(({tool:a,icon:b,title:c})=>(0,d.jsx)("button",{onClick:()=>A(b=>({...b,activeTool:a})),className:`p-2 rounded hover:bg-muted transition-colors ${z.activeTool===a?"bg-primary text-primary-foreground":""}`,title:c,children:(0,d.jsx)(b,{className:"w-4 h-4"})},a))}),(0,d.jsxs)("div",{className:"flex items-center gap-2 pr-2 border-r border-border",children:[(0,d.jsx)("button",{onClick:()=>M(!L),className:"p-2 rounded hover:bg-muted transition-colors",title:"Colors",children:(0,d.jsx)(o.A,{className:"w-4 h-4"})}),(0,d.jsx)("div",{className:"w-6 h-6 rounded border-2 border-border",style:{backgroundColor:z.strokeColor}})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)("button",{onClick:U,className:"p-2 rounded hover:bg-muted transition-colors text-destructive",title:"Clear All",disabled:0===x.shapes.length&&0===x.texts.length,children:(0,d.jsx)(p.A,{className:"w-4 h-4"})}),v&&(0,d.jsx)("button",{onClick:v,className:"p-2 rounded hover:bg-muted transition-colors text-green-600",title:"Save Annotations",children:(0,d.jsx)(q.A,{className:"w-4 h-4"})})]})]}),(0,d.jsx)(f.N,{children:L&&(0,d.jsx)(g.P.div,{initial:{y:-10,opacity:0},animate:{y:0,opacity:1},exit:{y:-10,opacity:0},className:"absolute top-full left-0 mt-2 bg-background border border-border rounded-lg shadow-lg p-3 min-w-[200px]",children:(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-xs font-medium text-muted-foreground",children:"Stroke Color"}),(0,d.jsx)("div",{className:"flex gap-2 mt-1",children:["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#8b5cf6","#000000"].map(a=>(0,d.jsx)("button",{onClick:()=>A(b=>({...b,strokeColor:a})),className:`w-6 h-6 rounded border-2 ${z.strokeColor===a?"border-foreground":"border-border"}`,style:{backgroundColor:a}},a))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-xs font-medium text-muted-foreground",children:"Stroke Width"}),(0,d.jsx)("input",{type:"range",min:"1",max:"8",value:z.strokeWidth,onChange:a=>A(b=>({...b,strokeWidth:Number(a.target.value)})),className:"w-full mt-1"}),(0,d.jsxs)("div",{className:"text-xs text-muted-foreground text-center",children:[z.strokeWidth,"px"]})]})]})})})]})}),(0,d.jsx)(f.N,{children:H&&c&&(0,d.jsx)(g.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"absolute bottom-4 right-4 pointer-events-auto",children:(0,d.jsxs)("div",{className:"bg-background border border-border rounded-lg shadow-lg p-2 flex items-center gap-2",children:[(0,d.jsx)("button",{onClick:()=>T(H),className:"p-2 rounded hover:bg-destructive/10 text-destructive transition-colors",title:"Delete Selected",children:(0,d.jsx)(p.A,{className:"w-4 h-4"})}),(0,d.jsx)("button",{onClick:()=>I(null),className:"p-2 rounded hover:bg-muted transition-colors",title:"Deselect",children:(0,d.jsx)(h.A,{className:"w-4 h-4"})})]})})})]})}},67153:(a,b,c)=>{c.d(b,{N:()=>d});function d(a){let b=a;return(b=(b=(b=(b=(b=(b=(b=(b=b.replace(/^### (.*$)/gm,'<h3 class="text-xl font-semibold mb-3">$1</h3>')).replace(/^## (.*$)/gm,'<h2 class="text-2xl font-bold mb-4">$1</h2>')).replace(/^# (.*$)/gm,'<h1 class="text-4xl font-bold mb-6">$1</h1>')).replace(/\*\*(.*?)\*\*/g,'<strong class="font-bold">$1</strong>')).replace(/\*(.*?)\*/g,'<em class="italic">$1</em>')).replace(/^- (.*$)/gm,'<li class="mb-2 ml-4">â€¢ $1</li>')).replace(/(<li.*<\/li>\s*)+/g,'<ul class="space-y-1 mb-4">$&</ul>')).split("\n").map(a=>{let b=a.trim();return""===b||b.startsWith("<h")||b.startsWith("<li")||b.startsWith("<ul")||b.startsWith("</ul>")?a:!b.includes("<")&&b.length>0?`<p class="mb-3 leading-relaxed">${b}</p>`:a}).join("\n")).replace(/\n\s*\n/g,"\n")}}};